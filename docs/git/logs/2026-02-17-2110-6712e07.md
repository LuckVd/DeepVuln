# 6712e07

## 基本信息

| 字段 | 值 |
|------|-----|
| **时间** | 2026-02-17 21:10 |
| **Commit** | 6712e07 |
| **Message** | fix(l1): correct primary_language attribute error in SecurityAnalyzer |

## 简介

修复 SecurityAnalyzer 中的 `primary_language` 属性错误，该 bug 导致攻击面检测静默失败。

## 变更文件

| 文件 | 操作 |
|------|------|
| `src/layers/l1_intelligence/security_analyzer/analyzer.py` | 修改 |

## Bug 详情

### 问题
`analyzer.py:267-268` 引用了不存在的 `tech_stack.primary_language` 属性：
```python
# 错误代码
if tech_stack.primary_language:
    frameworks.append(tech_stack.primary_language.lower())
```

### 原因
`TechStack` 模型只有 `languages: list[Language]`，没有 `primary_language: str` 属性。

### 修复
```python
# 正确代码
if tech_stack.languages:
    frameworks.append(tech_stack.languages[0].value.lower())
```

## 验证结果

Dubbo 项目扫描成功检测到攻击面：
- RPC (Dubbo): 6
- gRPC: 10
- 总计: 16 个入口点

## 关联目标

- 目标：P1-09: Tree-sitter 攻击面检测
- 状态：completed (bug fix for completed goal)
