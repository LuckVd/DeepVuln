# 5de94c3

## 基本信息

| 字段 | 值 |
|------|-----|
| **时间** | 2026-03-01 11:30 |
| **Commit** | 5de94c3d8ee84f14384928a4cf33f0fbee92c118 |
| **Message** | feat(l3): add CodeQL build system support and enhance LLM error handling |

## 简介

CodeQL 构建系统支持（自动检测 + 执行 + LLM 诊断）+ LLM 错误处理增强 + GLM-5 JSON 兼容性

## 变更文件

| 文件 | 操作 |
|------|------|
| `src/layers/l3_analysis/build/__init__.py` | 新增 |
| `src/layers/l3_analysis/build/detector.py` | 新增 |
| `src/layers/l3_analysis/build/executor.py` | 新增 |
| `src/layers/l3_analysis/build/diagnostic.py` | 新增 |
| `src/layers/l3_analysis/engines/codeql.py` | 修改 |
| `src/layers/l3_analysis/engines/opencode_agent.py` | 修改 |
| `src/layers/l3_analysis/llm/client.py` | 修改 |
| `src/layers/l3_analysis/llm/openai_client.py` | 修改 |
| `src/layers/l1_intelligence/attack_surface/llm_detector.py` | 修改 |
| `src/core/utils/json_parser.py` | 修改 |
| `tests/unit/test_l3/test_llm_client.py` | 修改 |
| `config.example.toml` | 修改 |
| `docs/CURRENT_GOAL.md` | 修改 |

## 功能变更

| 功能 | 操作 | 说明 |
|------|------|------|
| 构建系统检测 | 新增 | 自动检测 Go/Java/Node.js/Python 构建系统 |
| 构建执行器 | 新增 | 在 CodeQL 数据库创建前执行构建 |
| LLM 构建诊断 | 新增 | 15+ 错误模式 + LLM 分析 |
| skip_build 选项 | 新增 | 支持 CodeQL 跳过构建 |
| LLM 错误类型 | 新增 | EmptyResponse, TruncatedResponse, JSONParse |
| JSON 修复函数 | 新增 | GLM-5 兼容的 5 个修复函数 |
| 文件选择优化 | 修改 | Go 项目优先选择 handler 目录 |

## 关联目标

- 目标：改进 CodeQL Go 项目扫描：支持自动构建和 LLM 辅助构建诊断
- 状态：completed
